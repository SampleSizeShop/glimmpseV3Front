<h5>Review your study design and calculate stuff!! :)</h5>
<br>
<div class="col-8">
  <button (click)="postModel()" class="btn btn-primary btn-lg btn-block" id="calculate">Calculate!</button>
</div>
<div *ngIf="hasResults">
  <angular2csv [data]="downloadData" filename="result" [options]="options"></angular2csv>
  <table class="table">
    <tr>
      <th>Power</th>
      <th>Total Sample Size</th>
      <th>Means Scale Factor</th>
      <th>Variability Scale Factor</th>
      <th>Test</th>
      <th>Type I Error Rate</th>
    </tr>
    <tr *ngFor="let result of resultForDisplay; index as i" (click)="showDetail(getOutput(result['result']), i)" [class] = "rowStyle(i)">
      <td [ngStyle]="{'color': hasWarning(result['result']) ? 'red': 'green' }">{{getOutput(result['result'])}}</td>
      <td>{{ result['smallestGroupSize'] }}</td>
      <td>{{ result['scaleFactor'] }}</td>
      <td>{{ result['variability_scale_factor'] }}</td>
      <td>{{ result['test_type'] }}</td>
      <td>{{ result['typeOneErrorRate'] }}</td>
    </tr>
  </table>
  <div *ngIf="isShowDetail">
    <h4>Details</h4>
    <div class="form-group">
      <label>Power</label>
      <label class="form-control ng-binding">{{ detailPower }}</label>
    </div>
    <div class="form-group">
      <label>Independent Sampling Unit</label>
      <div class="well white-box">
        <label class="ng-binding">{{ detailClusterLevels[0]['levelName'] }}</label>
        <ul *ngIf="detailClusterLevels.length > 0">
            <li *ngFor="let line of detailClusterOverview" class="ng-binding">{{ line }}</li>
        </ul>
      </div>
    </div>
    <div class="form-group">
      <label>Sample Size Details</label>
      <table class="table">
        <tr>
          <th *ngFor="let predictorObject of detailPredictor;">{{predictorObject['name']}}</th>
          <th> {{ " Per Group Sample Size (" + detailClusterLevels[0]['levelName'] + ")" }} </th>
        </tr>
        <tr *ngFor="let combination of detailPredictorCombination; let i = index">
          <td *ngFor="let groupName of combination;"> {{groupName}}</td>
          <td> {{ studyDesign['_isuFactors']['smallestGroupSize'] * (i+1) }} </td>
        </tr>
        <tr>
          <td [attr.colspan]="detailPredictor.length"> Total Sample Size </td>
          <td> {{ studyDesign['_isuFactors']['smallestGroupSize'] * (1+detailPredictorCombination.length)*detailPredictorCombination.length/2 }} </td>
        </tr>
      </table>
    </div>
  </div>
  <div id="results" [hidden]="!e2eTest">{{resultString | json}}</div>
</div>
<div id="reviewDataModel" [hidden]="!e2eTest">{{outputString}}</div>
