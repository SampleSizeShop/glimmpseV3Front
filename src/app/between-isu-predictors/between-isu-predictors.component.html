<script src="../within-isu-repeated-measures/within-isu-repeated-measures.component.ts"></script>
<div *ngIf="!editing && stage === -1" id="firstPredictor">
  <div class="container-fluid">
    <div class="row">
      <div class="col" *ngIf="!hasPredictors()">
        <h5>Do you have any Between ISU Factors?</h5>
      </div>
      <div class="col" *ngIf="hasPredictors()">
        <h5>Would you like to add another Predictor?</h5>
      </div>
      <div class="col">
        <button id="addbetweenbtn" (click)="includeBetweenIsuFactors()" class="btn btn-primary">Define Between ISU Factors</button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="stages[0] === stageName">
  <form [formGroup]="predictorForm">
    <div class="container-fluid">
      <div class="form-group">
        <h5>Name your predictor:</h5>
        <input class="form-control" formControlName="predictorName" required>
      </div>
    </div>
  </form>
</div>

<div *ngIf="stages[1] === stageName">
  <form [formGroup]="groupsForm">
    <div class="container-fluid">
      <div class="row" *ngIf="firstGroup() || nextGroup()">
        <h5>Name at least two groups:</h5>
        <div class="col">
          <input class="form-control" formControlName="group" (keyup.enter)="addGroup()" id="group">
        </div>
        <div class="col">
          <i class="material-icons" (click)="addGroup()" style="margin-top: 10px" id="addgroup">add</i>
        </div>
      </div>
      <br>
      <small *ngIf="!firstGroup()">Outcomes:</small>
      <div *ngFor="let grp of groups" id="grouplist">
        <div class="container-fluid">
          <div class="row">
            <div class="col col-md-auto">
              <i class="material-icons" (click)="removeGroup(grp)" style="margin-bottom: 5px" id="removeoutcome">remove</i>
            </div>
            <div class="col">
              {{grp}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<form [formGroup]="groupSizeForm" class="form-horizontal">

  <div *ngIf="stages[2] === stageName && solveFor === 'POWER'">
    <div class="container-fluid">
      <h5>What size is your smallest group?</h5>
      <input type="number" class="form-control" id="smallestgroupsize" formControlName="smallestGroupSize" required>
    </div>
  </div>

  <div *ngIf="stages[2] === stageName && solveFor === 'SAMPLESIZE'">
    <div class="container-fluid">
      <h5>Tell us about the relative sizes of your groups as listed below:</h5>

      <div *ngFor="let group of subGroups; let i = index;">
        {{i}}
        <div *ngFor="let combination of group">
          {{combination.name}}
        </div>
      </div>

      <!-- <div *ngFor="let combination of betweenIsuFactors.combinations; let i = index;" class="row">
        <div class="col-md-auto">
          <label for="{{combination.name}}" style="margin-bottom: 0px">{{combination.name}}:</label>
        </div>
        <div class="col-md-auto">
          <input type="number" value="{{combination.size}}" id="{{combination.name}}">
        </div>
      </div> -->

    </div>
  </div>

</form>


<div *ngIf="hasPredictors()">
  <br>
  <small>Between ISU Predictors:</small>
  <div *ngFor="let predictor of betweenIsuFactors.predictors; let i = index">
    <div class="container-fluid">
      <div class="row">
        <div class="col col-md-auto">
          <i class="material-icons" (click)="removePredictor(predictor)" style="margin-bottom: 5px" id="removepredictor">remove</i>
        </div>
        <div class="col  col-md-auto">
          <i class="material-icons" (click)="editPredictor(predictor)" style="margin-bottom: 5px" id="editpredictor">create</i>
        </div>
        <div class="col">
          {{predictor | json}}
        </div>
      </div>
    </div>
  </div>
</div>
